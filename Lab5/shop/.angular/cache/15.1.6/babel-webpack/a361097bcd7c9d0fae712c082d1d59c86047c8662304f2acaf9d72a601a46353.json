{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"../likes.service\";\nimport * as i2 from \"@angular/common\";\nimport * as i3 from \"@angular/router\";\nimport * as i4 from \"../product-alerts/product-alerts.component\";\nfunction ProductItemComponent_div_0_p_6_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"p\");\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\"Description: \", ctx_r1.product.description, \"\");\n  }\n}\nfunction ProductItemComponent_div_0_p_7_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"p\");\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\"Generated description #\", ctx_r2.product.id, \"\");\n  }\n}\nconst _c0 = function (a1) {\n  return [\"/products\", a1];\n};\nfunction ProductItemComponent_div_0_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r4 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\")(1, \"h3\")(2, \"a\", 1);\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(4, \"div\");\n    i0.ɵɵelement(5, \"img\", 2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(6, ProductItemComponent_div_0_p_6_Template, 2, 1, \"p\", 0);\n    i0.ɵɵtemplate(7, ProductItemComponent_div_0_p_7_Template, 2, 1, \"p\", 0);\n    i0.ɵɵelementStart(8, \"a\", 3)(9, \"button\", 4);\n    i0.ɵɵtext(10, \"Kaspi page\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(11, \"app-product-alerts\", 5);\n    i0.ɵɵlistener(\"notify\", function ProductItemComponent_div_0_Template_app_product_alerts_notify_11_listener() {\n      i0.ɵɵrestoreView(_r4);\n      const ctx_r3 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r3.onNotify());\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(12, \"button\", 6);\n    i0.ɵɵlistener(\"click\", function ProductItemComponent_div_0_Template_button_click_12_listener() {\n      i0.ɵɵrestoreView(_r4);\n      const ctx_r5 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r5.incrementLikes());\n    });\n    i0.ɵɵtext(13);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(14, \"button\", 6);\n    i0.ɵɵlistener(\"click\", function ProductItemComponent_div_0_Template_button_click_14_listener() {\n      i0.ɵɵrestoreView(_r4);\n      const ctx_r6 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r6.removeProduct());\n    });\n    i0.ɵɵtext(15, \"Remove\");\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"title\", ctx_r0.product.name + \" details\")(\"routerLink\", i0.ɵɵpureFunction1(9, _c0, ctx_r0.product.id));\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r0.product.name, \" \");\n    i0.ɵɵadvance(2);\n    i0.ɵɵpropertyInterpolate(\"src\", ctx_r0.product.image, i0.ɵɵsanitizeUrl);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.product.description);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", !ctx_r0.product.description);\n    i0.ɵɵadvance(1);\n    i0.ɵɵpropertyInterpolate(\"href\", ctx_r0.product.url, i0.ɵɵsanitizeUrl);\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"product\", ctx_r0.product);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\"Like | \", ctx_r0.like_num, \"\");\n  }\n}\nexport class ProductItemComponent {\n  constructor(likes) {\n    this.likes = likes;\n  }\n  ngOnInit() {\n    if (this.product != undefined) {\n      this.like_num = this.likes.getLikes(this.product.id);\n      this.is_removed = false;\n    }\n  }\n  incrementLikes() {\n    if (this.product != undefined) this.likes.increment(this.product.id);\n    this.like_num++;\n  }\n  removeProduct() {\n    this.is_removed = true;\n  }\n  onNotify() {\n    window.alert('You will be notified when the product goes on sale');\n  }\n}\nProductItemComponent.ɵfac = function ProductItemComponent_Factory(t) {\n  return new (t || ProductItemComponent)(i0.ɵɵdirectiveInject(i1.LikesService));\n};\nProductItemComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: ProductItemComponent,\n  selectors: [[\"app-product-item\"]],\n  inputs: {\n    product: \"product\"\n  },\n  decls: 1,\n  vars: 1,\n  consts: [[4, \"ngIf\"], [3, \"title\", \"routerLink\"], [\"alt\", \"image of the product\", 3, \"src\"], [\"target\", \"_blank\", 3, \"href\"], [\"type\", \"button\"], [3, \"product\", \"notify\"], [1, \"change-button\", 3, \"click\"]],\n  template: function ProductItemComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵtemplate(0, ProductItemComponent_div_0_Template, 16, 11, \"div\", 0);\n    }\n    if (rf & 2) {\n      i0.ɵɵproperty(\"ngIf\", ctx.product != undefined && !ctx.is_removed);\n    }\n  },\n  dependencies: [i2.NgIf, i3.RouterLink, i4.ProductAlertsComponent],\n  styles: [\".change-button[_ngcontent-%COMP%] {\\r\\n    margin-left: 10px;\\r\\n}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvcHJvZHVjdC1pdGVtL3Byb2R1Y3QtaXRlbS5jb21wb25lbnQuY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0lBQ0ksaUJBQWlCO0FBQ3JCIiwic291cmNlc0NvbnRlbnQiOlsiLmNoYW5nZS1idXR0b24ge1xyXG4gICAgbWFyZ2luLWxlZnQ6IDEwcHg7XHJcbn0iXSwic291cmNlUm9vdCI6IiJ9 */\"]\n});","map":{"version":3,"mappings":";;;;;;;IAWIA,yBAA+B;IAAAA,YAAsC;IAAAA,iBAAI;;;;IAA1CA,eAAsC;IAAtCA,sEAAsC;;;;;IACrEA,yBAAgC;IAAAA,YAAuC;IAAAA,iBAAI;;;;IAA3CA,eAAuC;IAAvCA,uEAAuC;;;;;;;;;IAZ3EA,2BAAiD;IAGrCA,YACJ;IAAAA,iBAAI;IAGRA,2BAAK;IACDA,yBAA4D;IAChEA,iBAAM;IAENA,uEAAyE;IACzEA,uEAA2E;IAE3EA,4BAA4C;IAAsBA,2BAAU;IAAAA,iBAAS;IAErFA,8CAA8D;IAAtBA;MAAAA;MAAA;MAAA,OAAUA,gCAAU;IAAA,EAAC;IAACA,iBAAqB;IAEnFA,kCAAyD;IAA3BA;MAAAA;MAAA;MAAA,OAASA,sCAAgB;IAAA,EAAC;IAACA,aAAqB;IAAAA,iBAAS;IAEvFA,kCAAwD;IAA1BA;MAAAA;MAAA;MAAA,OAASA,qCAAe;IAAA,EAAC;IAACA,uBAAM;IAAAA,iBAAS;;;;IAlBhEA,eAAmC;IAAnCA,wDAAmC;IAClCA,eACJ;IADIA,oDACJ;IAIKA,eAAyB;IAAzBA,uEAAyB;IAG9BA,eAAyB;IAAzBA,iDAAyB;IACzBA,eAA0B;IAA1BA,kDAA0B;IAE3BA,eAAwB;IAAxBA,sEAAwB;IAEPA,eAAmB;IAAnBA,wCAAmB;IAEkBA,eAAqB;IAArBA,qDAAqB;;;ACTlF,OAAM,MAAOC,oBAAoB;EAK/BC,YACUC,KAAmB;IAAnB,UAAK,GAALA,KAAK;EAEf;EAEAC,QAAQ;IACN,IAAI,IAAI,CAACC,OAAO,IAAIC,SAAS,EAAE;MAC7B,IAAI,CAACC,QAAQ,GAAG,IAAI,CAACJ,KAAK,CAACK,QAAQ,CAAC,IAAI,CAACH,OAAO,CAACI,EAAE,CAAC;MACpD,IAAI,CAACC,UAAU,GAAG,KAAK;;EAE3B;EAEAC,cAAc;IACZ,IAAI,IAAI,CAACN,OAAO,IAAIC,SAAS,EAC3B,IAAI,CAACH,KAAK,CAACS,SAAS,CAAC,IAAI,CAACP,OAAO,CAACI,EAAE,CAAC;IACvC,IAAI,CAACF,QAAQ,EAAE;EACjB;EAEAM,aAAa;IACX,IAAI,CAACH,UAAU,GAAG,IAAI;EACxB;EAEAI,QAAQ;IACNC,MAAM,CAACC,KAAK,CAAC,oDAAoD,CAAC;EACpE;;AA7BWf,oBAAoB;mBAApBA,oBAAoB;AAAA;AAApBA,oBAAoB;QAApBA,oBAAoB;EAAAgB;EAAAC;IAAAb;EAAA;EAAAc;EAAAC;EAAAC;EAAAC;IAAA;MDTjCtB,uEAqBM;;;MArBAA,kEAAyC","names":["i0","ProductItemComponent","constructor","likes","ngOnInit","product","undefined","like_num","getLikes","id","is_removed","incrementLikes","increment","removeProduct","onNotify","window","alert","selectors","inputs","decls","vars","consts","template"],"sourceRoot":"","sources":["C:\\Users\\Margulan\\Desktop\\gg\\KBTU\\2-course\\4\\Web\\Lab5\\shop\\src\\app\\product-item\\product-item.component.html","C:\\Users\\Margulan\\Desktop\\gg\\KBTU\\2-course\\4\\Web\\Lab5\\shop\\src\\app\\product-item\\product-item.component.ts"],"sourcesContent":["<div *ngIf=\"product != undefined && !is_removed\">\r\n    <h3>\r\n        <a [title]=\"product.name + ' details'\" [routerLink]=\"['/products', product.id]\">\r\n            {{ product.name }}\r\n        </a>\r\n    </h3>\r\n\r\n    <div>\r\n        <img src=\"{{ product.image }}\" alt=\"image of the product\" />\r\n    </div>\r\n\r\n    <p *ngIf=\"product.description\">Description: {{ product.description }}</p>\r\n    <p *ngIf=\"!product.description\">Generated description #{{ product.id }}</p>\r\n\r\n    <a href=\"{{ product.url }}\" target=\"_blank\"><button type=\"button\">Kaspi page</button></a>\r\n\r\n    <app-product-alerts [product]=\"product\" (notify)=\"onNotify()\"></app-product-alerts>\r\n\r\n    <button class=\"change-button\" (click)=\"incrementLikes()\">Like | {{ like_num }}</button>\r\n\r\n    <button class=\"change-button\" (click)=\"removeProduct()\">Remove</button>\r\n</div>","import { Component, Input, OnChanges, SimpleChanges, OnInit } from '@angular/core';\r\nimport { Product } from '../products';\r\nimport { LikesService } from '../likes.service';\r\n\r\n@Component({\r\n  selector: 'app-product-item',\r\n  templateUrl: './product-item.component.html',\r\n  styleUrls: ['./product-item.component.css']\r\n})\r\nexport class ProductItemComponent implements OnInit {\r\n  @Input() product: Product | undefined;\r\n  like_num!: number;\r\n  is_removed!: boolean;\r\n\r\n  constructor (\r\n    private likes: LikesService\r\n  ) {\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    if (this.product != undefined) {\r\n      this.like_num = this.likes.getLikes(this.product.id);\r\n      this.is_removed = false;\r\n    }\r\n  }\r\n\r\n  incrementLikes() {\r\n    if (this.product != undefined)\r\n      this.likes.increment(this.product.id);\r\n    this.like_num++;\r\n  }\r\n\r\n  removeProduct() {\r\n    this.is_removed = true;\r\n  }\r\n\r\n  onNotify() {\r\n    window.alert('You will be notified when the product goes on sale');\r\n  }\r\n}"]},"metadata":{},"sourceType":"module","externalDependencies":[]}